<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Vision Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --reverse-zoom: 1; }
        .transition-all { transition: all 0.3s ease; }

        /* --- INACCESSIBLE MODE STYLES --- */
        .inaccessible-mode .low-contrast-label { color: #94a3b8 !important; }
        .inaccessible-mode .low-contrast-border { border-color: #f1f5f9 !important; }
        .inaccessible-mode input::placeholder { color: #cbd5e1 !important; opacity: 1; }
        .inaccessible-mode *:focus { outline: none !important; box-shadow: none !important; }
        .inaccessible-mode .proximity-box { display: flex; justify-content: space-between; width: 100%; align-items: center; }
        
        .inaccessible-mode .no-scale { 
            display: inline-block; 
            transform: scale(var(--reverse-zoom, 1)); 
            transform-origin: left; 
        }

        .inaccessible-mode #bad-feedback-img { 
            display: block !important; 
            width: 120px !important; 
            height: 38px !important;
            cursor: pointer;
            border-radius: 4px !important;
        }
        .inaccessible-mode #good-feedback-btn { display: none !important; }

        .tooltip-box {
            display: none; position: absolute; background: #1f2937; color: white;
            padding: 12px; width: 220px; z-index: 50; left: 20px; top: 10px; border-radius: 8px;
        }
        .inaccessible-mode .info-trigger:hover + .tooltip-box { display: block; }

        /* --- ACCESSIBLE MODE STYLES --- */
        .accessible-mode *:focus-visible { outline: 3px solid #2563eb !important; outline-offset: 2px !important; }
        .accessible-mode .proximity-box { display: flex; gap: 8px; align-items: center; width: 100%; }

        .accessible-mode #bad-feedback-img { display: none !important; }
        .accessible-mode #good-feedback-btn { 
            display: flex !important; 
            align-items: center; justify-content: center;
            background-color: #dc2626; color: white; 
            font-weight: 500; 
            width: 120px; height: 38px;
            border-radius: 4px; font-size: 13px;
            text-transform: uppercase; font-family: sans-serif;
            letter-spacing: 0.045em;
        }
        .accessible-mode #good-feedback-btn:hover { background-color: #991b1b; }

        .accessible-mode .tooltip-container:hover .tooltip-box,
        .accessible-mode .info-trigger:focus + .tooltip-box { display: block; }

        .accessible-mode .tooltip-box::before {
            content: "";
            position: absolute;
            top: -20px; left: -20px; right: 0; bottom: 0;
            z-index: -1;
        }

        /* --- LAYOUT --- */
        .label-row { height: 1.5rem !important; display: flex; align-items: center; margin-bottom: 0.25rem; }
        .info-panel-container { min-height: 450px !important; display: flex; flex-direction: column; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ef4444; transition: .4s; border-radius: 28px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }
        .tab-btn[aria-selected="true"] { background-color: #111827; color: #60a5fa; border-bottom: 2px solid #60a5fa; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 font-sans transition-colors duration-500" id="bodyTag">

    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        <header class="bg-white border-b border-gray-100">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span id="txt-inaccessible" class="text-xs font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="toggleMode()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span id="txt-accessible" class="text-xs font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>
                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2 uppercase tracking-tighter">Low Vision Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-16">
                <div class="lg:col-span-1 space-y-6">
                    <div>
                        <div class="label-row">
                            <label id="txt-label-name" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Full Name</label>
                        </div>
                        <input type="text" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <div class="relative">
                        <div class="label-row proximity-box">
                            <label id="txt-label-passport" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Passport ID</label>
                            <div class="relative inline-block tooltip-container">
                                <button type="button" id="info-btn" class="info-trigger cursor-help bg-blue-700 text-white rounded-full w-4 h-4 flex items-center justify-center text-[9px] font-bold">i</button>
                                <div class="tooltip-box shadow-xl text-xs" id="txt-tooltip">Tooltip text</div>
                            </div>
                        </div>
                        <input type="text" id="passport-input" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <div>
                        <div class="label-row">
                            <div class="no-scale">
                                <label id="txt-label-email" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Email Address</label>
                            </div>
                        </div>
                        <input type="email" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <button id="txt-btn" class="w-full bg-blue-600 hover:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg uppercase text-sm tracking-wide transition-colors">
                        Update Profile
                    </button>

                    <div class="pt-6 border-t border-gray-200 flex flex-col items-start gap-3">
                        <h2 id="txt-feedback-label" class="text-xs font-bold uppercase text-gray-800">Help us improve</h2>
                        <img id="bad-feedback-img" src="https://placehold.co/120x38/dc2626/ffffff/png?text=FEEDBACK" alt="Feedback">
                        <button id="good-feedback-btn">Feedback</button>
                    </div>
                </div>

                <div class="lg:col-span-3">
                    <div class="info-panel-container bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest" aria-selected="true">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Impacted users</button>
                        </div>
                        <div id="panel-test" class="p-8 space-y-6 text-sm flex-grow">
                            <h3 id="txt-guide-title" class="text-blue-400 font-bold uppercase text-xs mb-2">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-4 opacity-95"></ol>
                        </div>
                        <div id="panel-feedback" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-bold uppercase mb-6"></h3>
                            <div id="critiqueContent" class="space-y-6"></div>
                        </div>
                        <div id="panel-user" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <div id="txt-user-content" class="opacity-95 leading-relaxed text-xs"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Digital Accessibility Empathy Lab", title: "Low Vision Experience",
                name: "Full Name", passport: "Passport ID", email: "Email Address", btn: "Update Profile",
                feedbackLabel: "Help us improve", feedbackBtnText: "Feedback",
                tooltip: "Enter your 6-digit passport number without spaces.", passportHint: "(e.g. AB1234)",
                tabTest: "How to test", tabUser: "Impacted users", tabIssues: "Issues", tabRemediations: "Remediations", guideTitle: "Step-by-step guide",
                testSteps: [
                    "Try to read the form and identify all instructions provided.",
                    "Zoom to 200%.",
                    "Attempt to trigger the tooltip using only the mouse, then using only the keyboard (Keys: Tab, Space, Enter).",
                    "Observe the Email Address label as you zoom.",
                    "Check the red 'Feedback' button and the tooltip content at this zoom level.",
                    "Switch to the accessible version and repeat these steps."
                ],
                critiques: {
                    bad: { title: "What is wrong?", items: [
                        { f: "1. Contrast Failure", c: "Labels and placeholder instructions fail minimum contrast requirements, making them difficult to identify." },
                        { f: "2. Tooltip Displacement & Inaccessibility", c: "The tooltip content moves out of sight or disappears when zooming. It is also unreachable for keyboard-only users." },
                        { f: "3. Fixed Scaling", c: "The Email label is locked. As a user zooms in, the text stays tiny, 'blocking' the browser's zoom feature." },
                        { f: "4. Image of Text", c: "The 'Feedback' button is an image. It blurs and pixelates when zoomed, becoming unreadable." }
                    ]},
                    good: { title: "Remediations", items: [
                        { f: "Color Contrast (WCAG 2.1 AA)", c: "Ensure a ratio of at least 4.5:1. Use visible labels, not placeholders, as they disappear when typing." },
                        { f: "Persistent & Accessible Tooltips", c: "Tooltips must respond to both mouse and keyboard. They should be 'Dismissable' (ESC key), 'Hoverable', and 'Persistent'." },
                        { f: "Responsive & Fluid Scaling", c: "Avoid locking text scales. Use relative units (rem) so layouts adapt to zoom levels up to 400%." },
                        { f: "Live Text over Images", c: "Build UI with CSS and HTML text. This ensures components stay sharp at any zoom level." }
                    ]}
                },
                userTitle: "Who is impacted?", userList: [
                    "**Low Vision Users:** Depend on zoom to read. Locked scales or blurry images make content inaccessible.",
                    "**Magnifier Users:** See only a small part of the screen. Displaced or fast-vanishing tooltips are missed.",
                    "**Colorblind Users:** Struggle with low contrast. Faded text can blend into the background completely.",
                    "**Mobile Users:** On touch devices, tooltips requiring a mouse hover are inaccessible."
                ]
            },
            fr: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Labo d'Empathie Accessibilité", title: "Expérience Basse Vision",
                name: "Nom complet", passport: "ID Passeport", email: "Adresse e-mail", btn: "Mettre à jour",
                feedbackLabel: "Aidez-nous à nous améliorer", feedbackBtnText: "Feedback",
                tooltip: "Entrez votre numéro de passeport à 6 chiffres sans espaces.", passportHint: "(ex. AB1234)",
                tabTest: "Comment tester", tabUser: "Utilisateurs impactés", tabIssues: "Problèmes", tabRemediations: "Corrections", guideTitle: "Guide étape par étape",
                testSteps: [
                    "Essayez de lire le formulaire et d'identifier toutes les instructions fournies.",
                    "Zoomez à 200%.",
                    "Tentez de déclencher l'infobulle à la souris, puis au clavier (Touches : Tab, Espace, Entrée).",
                    "Observez le libellé Email pendant le zoom.",
                    "Vérifiez le bouton rouge 'Feedback' et l'infobulle à ce zoom.",
                    "Passez à la version accessible et répétez."
                ],
                critiques: {
                    bad: { title: "Quel est le problème ?", items: [
                        { f: "1. Échec du contraste", c: "Les étiquettes et instructions ne respectent pas le contraste minimum, ce qui les rend difficiles à identifier." },
                        { f: "2. Déplacement et inaccessibilité de l'infobulle", c: "Le contenu de l'infobulle sort de la vue au zoom et est inaccessible au clavier." },
                        { f: "3. Échelle fixe", c: "Le libellé Email est bloqué. Au zoom, le texte reste minuscule, bloquant la fonction de zoom." },
                        { f: "4. Image de texte", c: "Le bouton 'Feedback' est une image. Il devient flou et pixélisé au zoom." }
                    ]},
                    good: { title: "Corrections", items: [
                        { f: "Contraste des couleurs (WCAG 2.1 AA)", c: "Assurez un ratio de 4.5:1. Utilisez des étiquettes visibles plutôt que des placeholders." },
                        { f: "Infobulles persistantes et accessibles", c: "Les infobulles doivent répondre à la souris et au clavier. Elles doivent être 'Dismissable', 'Hoverable' et 'Persistent'." },
                        { f: "Mise à l'échelle responsive", c: "Évitez de bloquer l'échelle du texte. Utilisez des unités relatives (rem)." },
                        { f: "Texte réel plutôt qu'images", c: "Construisez l'interface en CSS/HTML pour que les composants restent nets au zoom." }
                    ]}
                },
                userTitle: "Qui est impacté ?", userList: [
                    "**Malvoyants :** Dépendent du zoom. Les échelles fixes ou images floues rendent le contenu inaccessible.",
                    "**Utilisateurs de loupe :** Ne voient qu'une partie de l'écran. Les infobulles déplacées sont manquées.",
                    "**Daltoniens :** Difficultés avec le faible contraste. Le texte délavé peut disparaître.",
                    "**Utilisateurs mobiles :** Sur tactile, les infobulles nécessitant un survol sont inaccessibles."
                ]
            },
            nl: {
                inaccessible: "Niet Toegankelijk", accessible: "Toegankelijk", labTitle: "Toegankelijkheid Lab", title: "Lage Visus Ervaring",
                name: "Volledige Naam", passport: "Paspoort ID", email: "E-mailadres", btn: "Profiel Bijwerken",
                feedbackLabel: "Help ons verbeteren", feedbackBtnText: "Feedback",
                tooltip: "Voer uw 6-cijferige paspoortnummer in zonder spaties.", passportHint: "(bijv. AB1234)",
                tabTest: "Hoe te testen", tabUser: "Impact op gebruikers", tabIssues: "Problemen", tabRemediations: "Oplossingen", guideTitle: "Stappenplan",
                testSteps: [
                    "Probeer het formulier te lezen en identificeer alle verstrekte instructies.",
                    "Zoom naar 200%.",
                    "Trigger de tooltip met de muis en vervolgens met het toetsenbord (Tab, Spatie, Enter).",
                    "Bekijk het Email label terwijl u zoomt.",
                    "Controleer de rode 'Feedback' knop en de tooltip inhoud op dit zoomniveau.",
                    "Switch naar de toegankelijke versie en herhaal deze stappen."
                ],
                critiques: {
                    bad: { title: "Wat is er mis?", items: [
                        { f: "1. Contrastfout", c: "Labels en instructies voldoen niet aan de contrasteisen, wat identificatie moeilijk maakt." },
                        { f: "2. Tooltip verplaatsing & ontoegankelijkheid", c: "De tooltip verdwijnt uit het zicht bij zoomen en is onbereikbaar voor toetsenbordgebruikers." },
                        { f: "3. Vaste schaling", c: "Het Email label is vergrendeld. Bij zoomen blijft de tekst klein, wat de zoomfunctie blokkeert." },
                        { f: "4. Afbeelding van tekst", c: "De 'Feedback' knop is een afbeelding. Deze wordt wazig en onleesbaar bij zoomen." }
                    ]},
                    good: { title: "Oplossingen", items: [
                        { f: "Kleurcontrast (WCAG 2.1 AA)", c: "Zorg voor een ratio van 4.5:1. Gebruik zichtbare labels in plaats van placeholders." },
                        { f: "Blijvende & toegankelijke tooltips", c: "Tooltips moeten reageren op muis en toetsenbord. Ze moeten 'Dismissable', 'Hoverable' en 'Persistent' zijn." },
                        { f: "Responsieve schaling", c: "Vermijd vaste tekstschalen. Gebruik relatieve eenheden (rem) voor zoomniveaus tot 400%." },
                        { f: "Live tekst over afbeeldingen", c: "Bouw UI met CSS en HTML tekst zodat componenten scherp blijven bij zoomen." }
                    ]}
                },
                userTitle: "Wie wordt beïnvloed?", userList: [
                    "**Slechtzienden:** Afhankelijk van zoom. Vaste schalen of wazige afbeeldingen maken inhoud ontoegankelijk.",
                    "**Schermloepgebruikers:** Zien slechts een deel van het scherm. Tooltips worden gemist.",
                    "**Kleurenblinden:** Moeite met laag contrast. Vervaagde tekst kan volledig wegvallen.",
                    "**Mobiele gebruikers:** Op touch-apparaten zijn tooltips die hover vereisen ontoegankelijk."
                ]
            },
            de: {
                inaccessible: "Nicht Barrierefrei", accessible: "Barrierefrei", labTitle: "Empathie-Labor", title: "Sehbehinderung Erfahrung",
                name: "Name", passport: "Pass-ID", email: "E-Mail", btn: "Profil Aktualisieren",
                feedbackLabel: "Helfen Sie uns zu verbessern", feedbackBtnText: "Feedback",
                tooltip: "6-stellige Passnummer ohne Leerzeichen eingeben.", passportHint: "(z.B. AB1234)",
                tabTest: "Wie man testet", tabUser: "Betroffene Nutzer", tabIssues: "Probleme", tabRemediations: "Lösungen", guideTitle: "Schritt-für-Schritt",
                testSteps: [
                    "Versuchen Sie, das Formular zu lesen und alle Anweisungen zu identifizieren.",
                    "Zoom auf 200%.",
                    "Tooltip mit der Maus und dann mit der Tastatur prüfen (Tab, Leertaste, Enter).",
                    "Beobachten Sie das E-Mail-Label beim Zoomen.",
                    "Prüfen Sie den 'Feedback'-Button und den Tooltip-Inhalt bei diesem Zoom.",
                    "Wechseln Sie zur barrierefreien Version und wiederholen Sie die Schritte."
                ],
                critiques: {
                    bad: { title: "Was ist falsch?", items: [
                        { f: "1. Kontrastfehler", c: "Labels und Platzhalter erfüllen nicht die Kontrastanforderungen und sind schwer zu erkennen." },
                        { f: "2. Tooltip-Verschiebung & Barrieren", c: "Der Tooltip verschwindet beim Zoomen aus dem Sichtfeld und ist per Tastatur nicht erreichbar." },
                        { f: "3. Feste Skalierung", c: "Das E-Mail-Label ist fixiert. Beim Zoomen bleibt der Text winzig und blockiert die Zoom-Funktion." },
                        { f: "4. Bild von Text", c: "Der 'Feedback'-Button ist ein Bild. Er wird beim Zoomen unscharf und unlesbar." }
                    ]},
                    good: { title: "Lösungen", items: [
                        { f: "Farbkontrast (WCAG 2.1 AA)", c: "Ratio von 4.5:1 sicherstellen. Sichtbare Labels statt Platzhalter verwenden." },
                        { f: "Beständige & barrierefreie Tooltips", c: "Tooltips müssen auf Maus und Tastatur reagieren: 'Dismissable', 'Hoverable' und 'Persistent'." },
                        { f: "Responsive Skalierung", c: "Relative Einheiten (rem) nutzen, damit Layouts bis 400% Zoom adaptieren." },
                        { f: "Echter Text statt Bilder", c: "UI mit CSS/HTML bauen, damit Komponenten bei jedem Zoom scharf bleiben." }
                    ]}
                },
                userTitle: "Wer ist betroffen?", userList: [
                    "**Sehbehinderte:** Auf Zoom angewiesen. Fixe Skalen oder unscharfe Bilder machen Inhalte unzugänglich.",
                    "**Lupen-Nutzer:** Sehen nur einen Teil des Bildschirms. Tooltips werden oft übersehen.",
                    "**Farbenblinde:** Probleme mit geringem Kontrast. Verblasster Text kann im Hintergrund verschwinden.",
                    "**Mobil-Nutzer:** Auf Touch-Geräten sind Tooltips, die 'Hover' erfordern, nicht nutzbar."
                ]
            }
        };

        let currentLang = 'en';

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const tooltip = document.getElementById('txt-tooltip');
                tooltip.style.display = 'none';
                setTimeout(() => tooltip.style.display = '', 500);
            }
        });

        function updateZoomVariable() {
            const isAcc = document.getElementById('modeToggle').checked;
            const zoom = window.devicePixelRatio || 1;
            document.documentElement.style.setProperty('--reverse-zoom', isAcc ? 1 : 1 / zoom);
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang] || translations['en'];
            const isAcc = document.getElementById('modeToggle').checked;
            
            document.getElementById('txt-inaccessible').innerText = t.inaccessible;
            document.getElementById('txt-accessible').innerText = t.accessible;
            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-label-name').innerText = t.name;
            document.getElementById('txt-label-email').innerText = t.email;
            document.getElementById('txt-btn').innerText = t.btn;
            document.getElementById('txt-feedback-label').innerText = t.feedbackLabel;
            document.getElementById('good-feedback-btn').innerText = t.feedbackBtnText;
            document.getElementById('txt-tooltip').innerText = t.tooltip;
            document.getElementById('txt-guide-title').innerText = t.guideTitle;
            document.getElementById('txt-test-steps').innerHTML = t.testSteps.map(s => `<li>${s}</li>`).join('');
            
            const pInput = document.getElementById('passport-input');
            const pLabel = document.getElementById('txt-label-passport');
            if (isAcc) {
                pLabel.innerText = `${t.passport} ${t.passportHint}`;
                pInput.placeholder = "";
            } else {
                pLabel.innerText = t.passport;
                pInput.placeholder = "e.g. AB1234";
            }

            document.getElementById('txt-user-content').innerHTML = `
                <h3 class="text-blue-400 font-bold uppercase mb-4 text-xs">${t.userTitle}</h3>
                <ul class="list-disc pl-5 space-y-3">${(t.userList||[]).map(li => `<li>${li.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')}</li>`).join('')}</ul>
            `;

            document.getElementById('tab-test').innerText = t.tabTest;
            document.getElementById('tab-user').innerText = t.tabUser;
            updateMode();
            
            document.querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('bg-blue-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                if (b.id === 'btn-' + lang) b.classList.add('bg-blue-600', 'text-white');
                else b.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function toggleMode() {
            updateZoomVariable();
            setLanguage(currentLang);
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang] || translations['en'];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;
            
            document.getElementById('bodyTag').className = isAcc ? "bg-gray-100 min-h-screen p-4 md:p-8 font-sans accessible-mode" : "bg-gray-100 min-h-screen p-4 md:p-8 font-sans inaccessible-mode";
            document.getElementById('tab-feedback').innerText = isAcc ? t.tabRemediations : t.tabIssues;
            document.getElementById('txt-feedback-title').innerText = crit.title;
            document.getElementById('critiqueContent').innerHTML = (crit.items || []).map(i => `<div><span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span><p class="text-white opacity-90">${i.c}</p></div>`).join('');
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                const panel = document.getElementById('panel-' + id);
                const tab = document.getElementById('tab-' + id);
                if (panel) panel.classList.toggle('hidden', id !== tabId);
                if (tab) tab.setAttribute('aria-selected', id === tabId);
            });
        }

        window.addEventListener('resize', updateZoomVariable);
        setLanguage('en');
        switchTab('test');
    </script>
</body>
</html>
