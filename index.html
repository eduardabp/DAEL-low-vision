<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Vision Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-all { transition: all 0.3s ease; }

        /* --- THE BAD WAY STYLES (Inaccessible Mode) --- */
        
        /* 1. Contrast Issues */
        .inaccessible-mode .low-contrast-label { color: #d1d5db !important; }
        .inaccessible-mode .low-contrast-border { border-color: #f3f4f6 !important; } /* Very faint border */
        .inaccessible-mode input::placeholder { color: #f9fafb !important; } /* Nearly invisible placeholder */

        /* 2. Remove Focus Indicator */
        .inaccessible-mode *:focus {
            outline: none !important;
            box-shadow: none !important;
        }

        /* 3. Label Height Cutoff */
        .inaccessible-mode .zoom-container {
            height: 1.1rem; 
            overflow: hidden;
            margin-bottom: 0.25rem;
        }

        /* 4. Blocked Scale */
        .inaccessible-mode .no-scale {
            display: inline-block;
            transform: scale(var(--reverse-zoom, 1));
            transform-origin: left;
        }

        /* 5. Tooltip logic */
        .tooltip-box {
            display: none;
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 12px;
            width: 200px;
            z-index: 50;
            left: 20px;
            top: 10px;
            border-radius: 8px;
        }
        .inaccessible-mode .info-trigger:hover + .tooltip-box { display: block; }
        .inaccessible-mode .tooltip-box:hover { display: none !important; }

        /* 6. Button Truncation & Poor Contrast Hover */
        .inaccessible-mode .btn-wrapper {
            width: 80px !important; /* Extremely truncated */
            overflow: hidden !important;
            border-radius: 8px;
        }
        .inaccessible-mode .btn-fixed {
            background-color: #2563eb;
            color: white;
            height: 44px;
            padding: 0 8px;
            font-weight: bold;
            display: block;
            width: max-content;
            white-space: nowrap;
        }
        .inaccessible-mode .btn-fixed:hover, 
        .inaccessible-mode .btn-fixed:focus {
            background-color: #60a5fa; /* Light blue on white/light text = poor contrast */
            color: #d1d5db; 
        }

        /* --- THE GOOD WAY STYLES (Accessible Mode) --- */
        
        .accessible-mode *:focus-visible {
            outline: 3px solid #2563eb !important;
            outline-offset: 2px !important;
        }
        .accessible-mode input::placeholder { color: #6b7280; }
        .accessible-mode .btn-wrapper { width: 100%; }
        .accessible-mode .btn-fixed {
            background-color: #1e40af;
            color: white;
            min-height: 48px;
            padding: 12px 24px;
            font-weight: bold;
            display: block;
            width: 100%;
            border-radius: 8px;
            transition: background 0.2s;
        }
        .accessible-mode .btn-fixed:hover,
        .accessible-mode .btn-fixed:focus {
            background-color: #1e3a8a;
            color: #ffffff;
        }
        /* Bridge for tooltip hover */
        .accessible-mode .info-trigger:hover + .tooltip-box,
        .accessible-mode .tooltip-box:hover { display: block; }
        .accessible-mode .tooltip-box::before {
            content: ""; position: absolute; left: -40px; top: -10px; width: 40px; height: 150%;
        }

        /* UI Helpers */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ef4444; transition: .4s; border-radius: 28px;
        }
        .slider:before {
            position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }
        .tab-btn[aria-selected="true"] { background-color: #111827; color: #60a5fa; border-bottom: 2px solid #60a5fa; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 font-sans transition-colors duration-500 inaccessible-mode" id="bodyTag">

    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        
        <header class="bg-white border-b border-gray-100">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight leading-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex flex-wrap items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span class="text-xs font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="toggleMode()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span class="text-xs font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>

                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded bg-blue-600 text-white" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2 uppercase tracking-tighter">Low Vision Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-16">
                
                <div class="lg:col-span-1 space-y-6">
                    <div>
                        <div class="zoom-container">
                            <label id="txt-label-name" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Full Name</label>
                        </div>
                        <input type="text" class="w-full border border-gray-500 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <div class="relative">
                        <div class="proximity-box mb-1">
                            <label id="txt-label-passport" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Passport ID</label>
                            <div class="relative inline-block">
                                <button type="button" class="info-trigger cursor-help bg-blue-700 text-white rounded-full w-4 h-4 flex items-center justify-center text-[9px] font-bold">i</button>
                                <div class="tooltip-box shadow-xl text-xs" id="txt-tooltip">Enter your 6-digit passport number without spaces.</div>
                            </div>
                        </div>
                        <input type="text" placeholder="e.g. AB1234" class="w-full border border-gray-500 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <div>
                        <div class="no-scale mb-1">
                            <label id="txt-label-email" class="text-xs font-semibold uppercase tracking-wider low-contrast-label">Email Address</label>
                        </div>
                        <input type="email" class="w-full border border-gray-500 p-2 rounded-lg bg-gray-50 text-sm low-contrast-border">
                    </div>

                    <div class="btn-wrapper">
                        <button id="txt-btn" class="btn-fixed text-sm">Update Profile</button>
                    </div>
                </div>

                <div class="lg:col-span-3">
                    <div class="bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700">Impacted users</button>
                        </div>

                        <div id="panel-test" class="p-8 space-y-6 text-sm">
                            <h3 id="txt-test-title" class="text-blue-400 font-black text-xs uppercase">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-4 opacity-95"></ol>
                        </div>

                        <div id="panel-feedback" class="p-8 hidden text-sm">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-black text-xs uppercase mb-6">What is wrong?</h3>
                            <div id="critiqueContent" class="space-y-6"></div>
                        </div>

                        <div id="panel-user" class="p-8 hidden text-sm">
                            <h3 id="txt-user-title" class="text-blue-400 font-black text-xs uppercase mb-6">Who is impacted?</h3>
                            <div id="txt-user-content" class="opacity-95 leading-relaxed"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                labTitle: "Digital Accessibility Empathy Lab", title: "Low Vision Experience",
                name: "Full Name", passport: "Passport ID", email: "Email Address", btn: "Update Profile",
                tooltip: "Enter your 6-digit passport number without spaces.",
                tabTest: "How to test", tabUser: "Impacted users",
                testSteps: [
                    "Zoom to 200%. Labels vanish and the button text is heavily truncated.",
                    "Look for field borders. In bad mode, they are nearly invisible.",
                    "Try to read the Passport placeholder (e.g. AB1234). It fails contrast tests.",
                    "Navigate with Tab key. In bad mode, you can't see where your focus is.",
                    "Hover the Update button. The colors blend together, making text hard to read."
                ],
                critiques: {
                    bad: { title: "What is wrong?", tab: "Issues", items: [
                        { f: "Low Contrast Borders", c: "Borders are too faint to define the input area." },
                        { f: "No Focus Indicator", c: "Keyboard users have no visual cue of their location." },
                        { f: "Extreme Truncation", c: "Button is locked to 80px width, hiding most of the label." },
                        { f: "Contrast Failure (Hover)", c: "Hover/Focus state uses colors with poor contrast ratios." }
                    ]},
                    good: { title: "How to remediate", tab: "Remediations", items: [
                        { f: "Defined Borders", c: "Use high contrast borders (3:1 minimum) for UI components." },
                        { f: "Visible Focus", c: "Implement a clear, high-contrast focus ring (WCAG 2.1 - 2.4.7)." },
                        { f: "Flexible Buttons", c: "Allow buttons to grow horizontally with their text." },
                        { f: "Safe Contrast", c: "Ensure all states (hover/focus) maintain a 4.5:1 ratio." }
                    ]}
                }
            }
        };

        let currentLang = 'en';

        function updateZoomVariable() {
            const isAcc = document.getElementById('modeToggle').checked;
            const zoom = window.devicePixelRatio || 1;
            document.documentElement.style.setProperty('--reverse-zoom', isAcc ? 1 : 1 / zoom);
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang] || translations['en'];
            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-label-name').innerText = t.name;
            document.getElementById('txt-label-passport').innerText = t.passport;
            document.getElementById('txt-label-email').innerText = t.email;
            document.getElementById('txt-btn').innerText = t.btn;
            document.getElementById('txt-tooltip').innerText = t.tooltip;
            document.getElementById('txt-test-steps').innerHTML = t.testSteps.map(s => `<li>${s}</li>`).join('');
            updateMode();
        }

        function toggleMode() {
            updateZoomVariable();
            updateMode();
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang] || translations['en'];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;
            document.getElementById('bodyTag').className = isAcc ? "bg-gray-100 min-h-screen p-4 md:p-8 font-sans accessible-mode" : "bg-gray-100 min-h-screen p-4 md:p-8 font-sans inaccessible-mode";
            document.getElementById('tab-feedback').innerText = crit.tab;
            document.getElementById('txt-feedback-title').innerText = crit.title;
            document.getElementById('critiqueContent').innerHTML = (crit.items || []).map(i => `<div><span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span><p class="text-white opacity-90">${i.c}</p></div>`).join('');
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                document.getElementById('panel-' + id).classList.toggle('hidden', id !== tabId);
                document.getElementById('tab-' + id).setAttribute('aria-selected', id === tabId);
            });
        }

        window.addEventListener('resize', updateZoomVariable);
        setLanguage('en');
        switchTab('test');
    </script>
</body>
</html>
