<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Vision Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-all { transition: all 0.3s ease; }

        /* --- THE BAD WAY STYLES --- */
        
        /* 1. Low Contrast Labels */
        .inaccessible-mode .low-contrast-label { color: #e5e7eb !important; }

        /* 2. Fixed height cutoff - Triggers on text zoom */
        .inaccessible-mode .zoom-container {
            height: 1.2rem; 
            overflow: hidden;
            border-bottom: 1px dashed #eee;
            margin-bottom: 0.5rem;
        }

        /* 3. Preventing Scale on a specific component (Email Label)
           We use a CSS variable updated by JS to 'counter-zoom' */
        .inaccessible-mode .no-scale {
            transform: scale(var(--reverse-zoom, 1));
            transform-origin: left;
        }

        /* 4. Proximity Issue: pushes icon to the far right */
        .inaccessible-mode .proximity-box {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        /* 5. Tooltip Issue: Vanishes if you try to hover it */
        .tooltip-box {
            display: none;
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 12px;
            width: 200px;
            z-index: 50;
            left: 20px;
            top: 20px;
        }
        .info-trigger:hover + .tooltip-box { display: block; }
        .inaccessible-mode .tooltip-box:hover { display: none !important; }

        /* --- UI COMPONENTS --- */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ef4444; transition: .4s; border-radius: 28px;
        }
        .slider:before {
            position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }

        .tab-btn[aria-selected="true"] {
            background-color: #111827;
            color: #60a5fa;
            border-bottom: 2px solid #60a5fa;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 font-sans transition-colors duration-500 inaccessible-mode" id="bodyTag">

    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        
        <header class="bg-white border-b border-gray-100">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex flex-wrap items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span id="label-inacc" class="text-[10px] font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="toggleMode()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span id="label-acc" class="text-[10px] font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>

                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded bg-blue-600 text-white" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2">Low Vision Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-12">
                
                <div class="lg:col-span-1 space-y-8">
                    
                    <div>
                        <div class="zoom-container">
                            <label id="txt-label-name" class="text-xs font-bold uppercase low-contrast-label">Full Name</label>
                        </div>
                        <input type="text" class="w-full border border-gray-400 p-2 rounded bg-gray-50 text-sm">
                    </div>

                    <div class="relative">
                        <div class="proximity-box mb-1">
                            <label id="txt-label-passport" class="text-xs font-bold uppercase low-contrast-label">Passport ID</label>
                            <div class="relative inline-block">
                                <span class="info-trigger cursor-help bg-blue-600 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold">i</span>
                                <div class="tooltip-box shadow-xl rounded-lg text-xs" id="txt-tooltip">Tooltip text</div>
                            </div>
                        </div>
                        <input type="text" class="w-full border border-gray-400 p-2 rounded bg-gray-50 text-sm">
                    </div>

                    <div>
                        <div class="no-scale mb-1">
                            <label id="txt-label-email" class="text-xs font-bold uppercase low-contrast-label">Email Address</label>
                        </div>
                        <input type="email" class="w-full border border-gray-400 p-2 rounded bg-gray-50 text-sm">
                    </div>

                    <button id="txt-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg text-sm uppercase tracking-widest">Update</button>
                </div>

                <div class="lg:col-span-3">
                    <div class="bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest" aria-selected="true">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Impacted users</button>
                        </div>

                        <div id="panel-test" class="p-8 space-y-4">
                            <h3 id="txt-test-title" class="text-blue-400 font-bold uppercase text-xs">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-2 text-sm opacity-90"></ol>
                        </div>

                        <div id="panel-feedback" class="p-8 hidden">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-bold uppercase text-xs mb-6">What is wrong?</h3>
                            <div id="critiqueContent" class="space-y-6 text-sm"></div>
                        </div>

                        <div id="panel-user" class="p-8 hidden">
                            <h3 id="txt-user-title" class="text-blue-400 font-bold uppercase text-xs mb-4">Who is impacted?</h3>
                            <div id="txt-user-content" class="text-sm opacity-90 leading-relaxed"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                labTitle: "Digital Accessibility Empathy Lab",
                title: "Low Vision Experience",
                name: "Full Name",
                passport: "Passport ID",
                email: "Email Address",
                btn: "Update Profile",
                tooltip: "Enter your 9-digit passport number without spaces.",
                tabTest: "How to test",
                tabUser: "Impacted users",
                testTitle: "Step-by-step guide",
                testSteps: [
                    "Zoom the page to 200%. Notice the 'Full Name' label gets cut off.",
                    "Look for the blue 'i' icon. Notice how far it is from the label on the right.",
                    "Try to read the tooltip by hovering the icon. Move your mouse to the text.",
                    "Check the 'Email' label while zooming. It refuses to grow."
                ],
                userTitle: "Who is impacted?",
                userList: [
                    "**Low Vision users** who use browser zoom to read text.",
                    "**Screen Magnifier users** who miss icons placed too far from labels.",
                    "**Aging users** who struggle with low contrast text.",
                    "**Mobile users** who need to zoom in on small touch targets."
                ],
                critiques: {
                    bad: {
                        title: "What is wrong?",
                        tab: "Issues",
                        items: [
                            { f: "Clipped Text", c: "The 'Full Name' label is in a fixed-height box. At 200% zoom, the text overflows and is hidden." },
                            { f: "Scale Blocking", c: "The 'Email' label is forced to stay small even when the user zooms the page." },
                            { f: "Visual Proximity", c: "The help icon is miles away from the label. Magnifier users won't see it." },
                            { f: "Inaccessible Tooltip", c: "The tooltip disappears when you try to move your mouse over it." }
                        ]
                    },
                    good: {
                        title: "How to remediate",
                        tab: "Remediations",
                        items: [
                            { f: "Fluid Containers", c: "Remove fixed heights. Allow containers to grow with the text (WCAG 1.4.4)." },
                            { f: "Support Scaling", c: "Ensure all elements scale proportionally with browser zoom levels." },
                            { f: "Proximity", c: "Place instructions and icons immediately next to the labels they belong to." },
                            { f: "Hoverable Content", c: "Ensure tooltips remain visible when the pointer moves over them (WCAG 1.4.13)." }
                        ]
                    }
                }
            },
            fr: {
                labTitle: "Labo d'Empathie Accessibilité",
                title: "Expérience Basse Vision",
                name: "Nom Complet",
                passport: "N° Passeport",
                email: "Adresse Email",
                btn: "Mettre à jour",
                tooltip: "Entrez les 9 chiffres sans espaces.",
                tabTest: "Comment tester",
                tabUser: "Utilisateurs impactés",
                testTitle: "Guide étape par étape",
                testSteps: [
                    "Zoomez à 200%. Notez que le libellé 'Nom Complet' est coupé.",
                    "Cherchez l'icône 'i'. Notez sa distance par rapport au texte.",
                    "Tentez de lire la bulle d'aide en survolant l'icône.",
                    "Le libellé 'Email' refuse de s'agrandir avec le zoom."
                ],
                userTitle: "Qui est impacté ?",
                userList: ["Utilisateurs malvoyants", "Utilisateurs de loupes d'écran", "Seniors"],
                critiques: {
                    bad: { title: "Quel est le problème ?", tab: "Problèmes", items: [{ f: "Texte coupé", c: "Le conteneur est trop petit pour le zoom." }] },
                    good: { title: "Comment corriger", tab: "Corrections", items: [{ f: "Conteneur fluide", c: "Laissez le texte s'étendre librement." }] }
                }
            },
            nl: {
                labTitle: "Toegankelijkheid Empathie Lab",
                title: "Lage Visus Ervaring",
                name: "Volledige Naam",
                passport: "Paspoortnummer",
                email: "E-mailadres",
                btn: "Bijwerken",
                tooltip: "Voer uw 9-cijferige nummer in.",
                tabTest: "Hoe te testen",
                tabUser: "Impact",
                testTitle: "Stappenplan",
                testSteps: ["Zoom naar 200%.", "Kijk naar het 'i'-icoon.", "Probeer de tooltip te lezen."],
                userTitle: "Wie wordt getroffen?",
                userList: ["Slechtziende gebruikers", "Vergrootglas-gebruikers"],
                critiques: {
                    bad: { title: "Wat is er mis?", tab: "Problemen", items: [{ f: "Tekst afgebroken", c: "Hoogte is vastgezet." }] },
                    good: { title: "Oplossingen", tab: "Oplossingen", items: [{ f: "Flexibele box", c: "Gebruik geen vaste hoogtes." }] }
                }
            },
            de: {
                labTitle: "Barrierefreiheit Empathie-Labor",
                title: "Sehbehinderung Erfahrung",
                name: "Vollständiger Name",
                passport: "Reisepass-ID",
                email: "E-Mail-Adresse",
                btn: "Aktualisieren",
                tooltip: "9-stellige Nummer eingeben.",
                tabTest: "Wie man testet",
                tabUser: "Betroffene Nutzer",
                testTitle: "Schritt-für-Schritt",
                testSteps: ["Auf 200% zoomen.", "Tooltip prüfen.", "Zoom-Blockierung sehen."],
                userTitle: "Wer ist betroffen?",
                userList: ["Sehbehinderte Menschen", "Nutzer von Bildschirmlupen"],
                critiques: {
                    bad: { title: "Was ist falsch?", tab: "Probleme", items: [{ f: "Text abgeschnitten", c: "Feste Höhe verhindert Skalierung." }] },
                    good: { title: "Lösung", tab: "Lösungen", items: [{ f: "Flüssiges Layout", c: "Container mitwachsen lassen." }] }
                }
            }
        };

        let currentLang = 'en';

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-label-name').innerText = t.name;
            document.getElementById('txt-label-passport').innerText = t.passport;
            document.getElementById('txt-label-email').innerText = t.email;
            document.getElementById('txt-btn').innerText = t.btn;
            document.getElementById('txt-tooltip').innerText = t.tooltip;
            document.getElementById('tab-test').innerText = t.tabTest;
            document.getElementById('tab-user').innerText = t.tabUser;
            document.getElementById('txt-test-title').innerText = t.testTitle;
            document.getElementById('txt-test-steps').innerHTML = t.testSteps.map(s => `<li>${s}</li>`).join('');
            document.getElementById('txt-user-title').innerText = t.userTitle;
            document.getElementById('txt-user-content').innerHTML = `<ul class="list-disc pl-5 space-y-2">${t.userList.map(li => `<li>${li.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')}</li>`).join('')}</ul>`;
            
            updateMode();

            document.querySelectorAll('.lang-btn').forEach(b => b.className = "lang-btn px-2 py-1 rounded bg-gray-200 text-gray-700");
            document.getElementById('btn-' + lang).className = "lang-btn px-2 py-1 rounded bg-blue-600 text-white";
        }

        function toggleMode() {
            updateMode();
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const body = document.getElementById('bodyTag');
            const t = translations[currentLang];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;

            body.className = isAcc ? "bg-gray-100 min-h-screen p-4 md:p-8 font-sans accessible-mode" : "bg-gray-100 min-h-screen p-4 md:p-8 font-sans inaccessible-mode";
            
            document.getElementById('tab-feedback').innerText = crit.tab;
            document.getElementById('txt-feedback-title').innerText = crit.title;
            
            document.getElementById('critiqueContent').innerHTML = crit.items.map(i => `
                <div>
                    <span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span>
                    <p class="text-white opacity-90">${i.c}</p>
                </div>
            `).join('');

            // If Accessible, clear the "reverse zoom" effect
            if (isAcc) document.documentElement.style.setProperty('--reverse-zoom', 1);
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                document.getElementById('panel-' + id).classList.toggle('hidden', id !== tabId);
                document.getElementById('tab-' + id).setAttribute('aria-selected', id === tabId);
            });
        }

        // Logic to detect Browser Zoom and counteract it for the .no-scale element
        window.addEventListener('resize', () => {
            const isAcc = document.getElementById('modeToggle').checked;
            if (!isAcc) {
                // Approximate zoom detection
                const zoomLevel = window.devicePixelRatio || 1;
                if (zoomLevel > 1) {
                    document.documentElement.style.setProperty('--reverse-zoom', 1 / zoomLevel);
                }
            }
        });

        setLanguage('en');
    </script>
</body>
</html>
